<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/xi-editor-gatsby/1.025e9d6dd63a31354818.css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}strong{font-weight:bolder}code{font-family:monospace,monospace;font-size:1em}img{border-style:none}button,input{font-family:inherit;font-size:100%;line-height:1.15;margin:0;overflow:visible}button{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}legend{color:inherit;display:table;max-width:100%;white-space:normal}[type=checkbox],[type=radio],legend{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}[hidden]{display:none}html{box-sizing:border-box;font-family:sans-serif}*,:after,:before{box-sizing:inherit}blockquote,h1,h2,h3,h4,p,pre{margin:0}button{background:transparent;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}ul{margin:0}*,:after,:before{border:0 solid #dae1e7}img{border-style:solid;max-width:100%;height:auto}input::-webkit-input-placeholder{color:inherit;opacity:.5}input::-ms-input-placeholder{color:inherit;opacity:.5}input::placeholder{color:inherit;opacity:.5}[role=button],button{cursor:pointer}table{border-collapse:collapse}.container{width:100%}@media (min-width:576px){.container{max-width:576px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:992px){.container{max-width:992px}}@media (min-width:1200px){.container{max-width:1200px}}.list-reset{list-style:none;padding:0}.bg-black{background-color:#22292f}.bg-white{background-color:#fff}.bg-green-lighter{background-color:#d9f1e3}.bg-blue-darker{background-color:#20303a}.bg-blue{background-color:#3490dc}.hover\:bg-blue-dark:hover{background-color:#2779bd}.border-green{border-color:#24d06b}.border-green-lighter{border-color:#d9f1e3}.border-green-lightest{border-color:#3efc9c}.focus\:border-grey-light:focus{border-color:#dae1e7}.rounded{border-radius:.25rem}.rounded-lg{border-radius:1.125rem}.rounded-full{border-radius:9999px}.rounded-t-lg{border-top-left-radius:1.125rem;border-top-right-radius:1.125rem}.border{border-width:1px}.border-t-2{border-top-width:2px}.border-t-4{border-top-width:4px}.border-l-8{border-left-width:8px}.block{display:block}.inline-block{display:inline-block}.table{display:table}.hidden{display:none}.flex{display:flex}.inline-flex{display:inline-flex}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.content-end{align-content:flex-end}.flex-1{flex:1 1 0%}.flex-no-shrink{flex-shrink:0}.font-sans{font-family:system-ui,BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-4{height:1rem}.h-6{height:1.5rem}.h-16{height:4rem}.h-32{height:8rem}.h-48{height:12rem}.h-full{height:100%}.leading-tight{line-height:1.25}.mx-4{margin-left:1rem;margin-right:1rem}.mx-5{margin-left:1.25rem;margin-right:1.25rem}.my-8{margin-top:2rem;margin-bottom:2rem}.mx-auto{margin-left:auto;margin-right:auto}.ml-0{margin-left:0}.mb-1{margin-bottom:.25rem}.mt-2{margin-top:.5rem}.ml-2{margin-left:.5rem}.mb-3{margin-bottom:.75rem}.mt-4{margin-top:1rem}.mr-4{margin-right:1rem}.mb-4{margin-bottom:1rem}.ml-4{margin-left:1rem}.mt-5{margin-top:1.25rem}.mb-5{margin-bottom:1.25rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mb-8{margin-bottom:2rem}.ml-8{margin-left:2rem}.mt-16{margin-top:4rem}.mb-24{margin-bottom:6rem}.mr-32{margin-right:8rem}.mb-32{margin-bottom:8rem}.ml-32{margin-left:8rem}.mb-auto{margin-bottom:auto}.max-h-full{max-height:100%}.max-w-xs{max-width:20rem}.max-w-md{max-width:40rem}.max-w-lg{max-width:50rem}.min-h-full{min-height:100%}.-mb-1{margin-bottom:-.25rem}.-ml-8{margin-left:-2rem}.-mt-16{margin-top:-4rem}.-mt-32{margin-top:-8rem}.-mr-32{margin-right:-8rem}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-hidden{overflow-y:hidden}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-4{padding:1rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.px-8{padding-left:2rem;padding-right:2rem}.pl-4{padding-left:1rem}.pt-6{padding-top:1.5rem}.pl-8{padding-left:2rem}.pr-10{padding-right:2.5rem}.pb-12{padding-bottom:3rem}.pb-32{padding-bottom:8rem}.absolute{position:absolute}.relative{position:relative}.pin{top:0;bottom:0;left:0}.pin,.pin-r{right:0}.pin-b{bottom:0}.pin-l{left:0}.shadow-md{box-shadow:0 4px 8px 0 rgba(0,0,0,.12),0 2px 4px 0 rgba(0,0,0,.08)}.fill-current{fill:currentColor}.stroke-current{stroke:currentColor}.text-grey-darkest{color:#3d4852}.text-grey-dark{color:#8795a1}.text-white{color:#fff}.text-green{color:#24d06b}.text-green-lighter{color:#d9f1e3}.text-blue-darker{color:#20303a}.hover\:text-green:hover{color:#24d06b}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-md{font-size:.9375rem}.text-base{font-size:1rem}.text-lg{font-size:1.125rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.text-4xl{font-size:2.25rem}.text-5xl{font-size:3rem}.uppercase{text-transform:uppercase}.no-underline{text-decoration:none}.tracking-wide{letter-spacing:.05em}.w-4{width:1rem}.w-6{width:1.5rem}.w-24{width:6rem}.w-48{width:12rem}.w-64{width:16rem}.w-auto{width:auto}.w-full{width:100%}.z-0{z-index:0}.z-10{z-index:10}#___gatsby,#___gatsby>div,body,html{width:100%;height:100%}@media (min-width:768px){.md\:mx-0{margin-left:0;margin-right:0}.md\:mt-0{margin-top:0}.md\:mr-0{margin-right:0}.md\:ml-0{margin-left:0}.md\:mt-8{margin-top:2rem}.md\:mt-16{margin-top:4rem}.md\:-ml-16{margin-left:-4rem}.md\:px-0{padding-left:0;padding-right:0}.md\:px-10{padding-left:2.5rem;padding-right:2.5rem}.md\:text-5xl{font-size:3rem}}@media (min-width:992px){.lg\:block{display:block}.lg\:flex{display:flex}.lg\:flex-row{flex-direction:row}.lg\:flex-row-reverse{flex-direction:row-reverse}.lg\:ml-0{margin-left:0}.lg\:ml-8{margin-left:2rem}.lg\:-mr-32{margin-right:-8rem}.lg\:-ml-32{margin-left:-8rem}.lg\:pl-23{padding-left:5.625rem}.lg\:w-3\/4{width:75%}}@media (min-width:1200px){.xl\:w-4\/5{width:80%}}</style><meta name="generator" content="Gatsby 2.0.73"/><link rel="manifest" href="/xi-editor-gatsby/manifest.webmanifest"/><title data-react-helmet="true">Rope science, part 6 - parallel and asynchronous word wrapping | Xi</title><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/xi-editor-gatsby/logos/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/xi-editor-gatsby/logos/favicon-16x16.png"/><link data-react-helmet="true" rel="mask-icon" href="/xi-editor-gatsby/logos/safari-pinned-tab.svg" color="#24d06b"/><link data-react-helmet="true" rel="shortcut icon" href="favicon.ico"/><link data-react-helmet="true" rel="apple-touch-icon" href="/xi-editor-gatsby/logos/apple-touch-icon.png"/><meta data-react-helmet="true" name="msapplication-TileColor"/><meta data-react-helmet="true" name="msapplication-config" content="browserconfig.xml"/><meta data-react-helmet="true" name="description" content="(originally written 24 Apr 2016) The xi approach to incremental word wrapping really only covers two of the use cases we care about: scrolling, and doing small edits to a large file. The other two main use cases are loading a file, and changing the line width. In both of those cases, the current…"/><meta data-react-helmet="true" name="image" content="https://elod10.github.io/xi-editor-gatsby/logos/logo.png"/><meta data-react-helmet="true" property="al:ios:url" content="nflx://www.netflix.com/?locale=fr-FR"/><meta data-react-helmet="true" property="al:android:app_name" content="Xi"/><meta data-react-helmet="true" property="al:android:url" content="https://elod10.github.io"/><meta data-react-helmet="true" name="apple-mobile-web-app-capable" content="yes"/><meta data-react-helmet="true" property="og:title" content="Xi"/><meta data-react-helmet="true" property="og:description" content="Xi-Editor website"/><meta data-react-helmet="true" property="og:image" content="https://elod10.github.io/xi-editor-gatsby/logos/logo.png"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Xi"/><meta data-react-helmet="true" name="twitter:description" content="Xi-Editor website"/><meta data-react-helmet="true" name="twitter:image" content="https://elod10.github.io/xi-editor-gatsby/logos/logo.png"/><link rel="sitemap" type="application/xml" href="/xi-editor-gatsby/sitemap.xml"/><link as="script" rel="preload" href="/xi-editor-gatsby/1-6e57b76f82a78bcb777f.js"/><link as="script" rel="preload" href="/xi-editor-gatsby/component---cache-gatsby-mdx-mdx-wrappers-dir-6-a-6-d-7612520-aff-73-cb-56-c-0-b-39-c-2-af-0-be-scope-hash-3010-b-3-badc-54-a-9-dfa-4-a-4-c-80-e-419-a-41-b-2-js-96b730ebcfd9805849e8.js"/><link as="script" rel="preload" href="/xi-editor-gatsby/app-46f25a4e0bb303c5d58f.js"/><link as="script" rel="preload" href="/xi-editor-gatsby/0-3058d9943b60ad518acf.js"/><link as="script" rel="preload" href="/xi-editor-gatsby/webpack-runtime-e180f5e508da91797d79.js"/><link as="fetch" rel="preload" href="/xi-editor-gatsby/static/d/90/path---documentation-rope-science-06-db-4-38f-laIBiYhcvQEwZGNkokc75vx8uc.json" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="h-full w-full flex flex-col items-stretch font-sans"><header class="flex flex-col flex-no-shrink border-t-2 border-green h-16 mb-32"><div class="bg-white"><div class="container mx-auto"><div class="flex justify-between items-center py-4"><div class="flex items-center"><a class="text-white no-underline flex items-center ml-2 md:ml-0" href="/xi-editor-gatsby/"><p class="font-bold text-4xl text-blue-darker">Xi</p></a></div><div class="flex justify-between overflow-x-auto overflow-y-hidden mx-4 md:mx-0"><a class="flex items-center no-underline text-base uppercase text-blue-darker mx-5 font-semibold witespace-no-wrap" href="/xi-editor-gatsby/">home</a><a class="flex items-center no-underline text-base uppercase text-blue-darker mx-5 font-semibold witespace-no-wrap" href="/xi-editor-gatsby/documentation/frontend-notes/">docs</a><a class="flex items-center no-underline text-base uppercase text-blue-darker mx-5 font-semibold witespace-no-wrap" href="/xi-editor-gatsby/gsoc/gsoc/">gsoc</a><a class="flex items-center no-underline text-base uppercase text-blue-darker mx-5 font-semibold witespace-no-wrap" href="/xi-editor-gatsby/contribute/">contribute</a><a class="flex items-center no-underline text-base uppercase text-blue-darker mx-5 font-semibold witespace-no-wrap" href="/xi-editor-gatsby/building-docs/">buildind docs</a><a class="flex items-center no-underline text-base uppercase text-blue-darker mx-5 font-semibold witespace-no-wrap" href="/xi-editor-gatsby/blog">blog</a></div></div></div></div></header><main role="main" class="flex-1 -mt-32"><div class="flex"><div class="w-64"><nav class="pt-6 max-w-xs w-auto pb-32"><ul class="list-reset flex flex-col flex-1"><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/frontend-notes/">Notes on writing front-ends</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/frontend-protocol/">The Frontend Protocol</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/plugin/">Plugin architecture</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/config/">Working with the config system</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/crdt/">CRDT - An approach to async plugins and undo</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/crdt-details/">CRDT - The Xi Text Engine</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/fuchsia-ledger-crdts/">CRDT - Using the Ledger for CRDTs</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/rope-science-00/">Rope science - Introduction</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/rope-science-01/">Rope science, part 1 - MapReduce for text</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/rope-science-02/">Rope science, part 2 - metrics</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/rope-science-03/">Rope science, part 3 - Grapheme cluster boundaries</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/rope-science-04/">Rope science, part 4 - parenthesis matching</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/rope-science-05/">Rope science, part 5 - incremental word wrapping</a></li><li class="leading-tight max-x-xs"><a aria-current="page" class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md font-semibold border-l-8 border-green-lightest" href="/xi-editor-gatsby/documentation/rope-science-06/">Rope science, part 6 - parallel and asynchronous word wrapping</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/rope-science-08/">Rope science, part 8 - CRDTs for concurrent editing</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/rope-science-09/">Rope science, part 9 - CRDT Approach to Async Plugins and Undo</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/rope-science-10/">Rope science, part 10 - designing for a conflict-free world</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/rope-science-11/">Rope science, part 11 - practical syntax highlighting</a></li><li class="leading-tight max-x-xs"><a class="block text-md px-6 py-2 text-blue-darker no-underline hover:text-green rounded-md" href="/xi-editor-gatsby/documentation/rope-science-12/">Rope science, part 12 - minimal invalidation</a></li></ul></nav></div><div class="max-w-lg px-2 md:px-10 py-8 mb-24 content mx-auto lg:ml-8 overflow-hidden"><div class="lg:w-3/4 xl:w-4/5"><h1 class="ml-4 lg:ml-0 text-blue-darker mt-8 mb-4">Rope science, part 6 - parallel and asynchronous word wrapping</h1><div><div><p><em>(originally written 24 Apr 2016)</em></p><p>The xi approach to incremental word wrapping really only covers two of the use cases we care about: scrolling, and doing small edits to a large file. The other two main use cases are loading a file, and changing the line width. In both of those cases, the current implementation will exhibit noticeable pauses. Here I’ll talk about what I plan to do to address those.</p><p>Computing word wrap when loading a file basically requires doing the operation in bulk. An incremental approach is not applicable because there is no “previous value” to compute a delta against. You basically have to do the work of computing the break locations, line widths, etc. My implementation runs at about 150MB/s, but for large files (over a couple MB) that’s still a pause.</p><p>Fortunately, there’s more we can do, notably exploit multi-core parallelism. Most computers that would run xi have at least 4 cores, so it’s worth going after if we can get a near-linear speedup. I think we can, at least in a lot of cases.</p><h2 id="Parallel-word-wrapping"><a href="#Parallel-word-wrapping" aria-hidden="true" class="anchor"></a>Parallel word wrapping</h2><p>There are a few ways to slice the problem. By far the easiest is to divide the input by hard breaks (newlines, essentially). Between any two hard breaks, the result of word wrapping is independent. Obviously, there’s one case where this won’t help, which is if you have a large file with no newlines (this can happen when serializing to XML or JSON without any formatting). Oh well.</p><p>Doing this in xi should be relatively easy, especially with the help of a framework like <a href="https://github.com/nikomatsakis/rayon" target="_blank" rel="nofollow noopener noreferrer">Rayon</a>, which I haven’t used yet but looks like it will be good for this kind of work. In fact, getting the computation started is fairly straightforward assuming the input file has already been put into a rope with the number of newlines summarized at each node - you can just enumerate the n lines in parallel, and for each, find the start and end of the line (an O(log n) operation), run the word wrapper, and return the result to an accumulator which just concatenates the wrapping results together.</p><p>I think this would fit pretty well into Rayon’s parallel iterator framework, but haven’t tried it yet, so am not 100% sure. All shards of the computation can share a reference to the source text (it doesn’t even need to bump the reference counter, as the type system can guarantee that the input’s lifetime exceeds any of the shards, as long as the reference is held til the end), and, similarly, the wrap results can just be concatenated together in functional style, rather than mutably appending to a result buffer.</p><p>This sounds like it would be fun to experiment with, and not too complicated, as the complexity shouldn&#x27;t leak beyond the word wrap computation itself.</p><h2 id="Asynchronous-word-wrapping"><a href="#Asynchronous-word-wrapping" aria-hidden="true" class="anchor"></a>Asynchronous word wrapping</h2><p>It’s always nice to make things go faster, and bringing the load time of a 300M file to under a second would be appealing (it would be in the ballpark of vim, though I haven’t measured it carefully), but it’s still not as good as it might be, and also not very satisfying when changing the line width (for example, by dynamically resizing the window). There’s also that case of no hard breaks in the text.</p><p>Making the word wrapping asynchronous can help with all this, but is definitely trickier to implement. It’s also not just a computer science problem of finding the result of the computation more quickly, it has implications for user interaction.</p><p>When loading a file, the basic idea is to aggressively append chunks of the file to the buffer. This has the <em>potential</em> to interfere with editing operations, but basically editing the interior of the prefix should be relatively clean with respect to appending more at the end. Another UX consequence is that the scrollbar (if visible) will show the buffer expanding as the file is loaded. I find this actually to be a pleasant affordance, reminiscent of how browsers used to display scrolls of HTML as they loaded from the network.</p><p>One subtlety is how to handle a “save” action while the file is still loading. The Right Way would be to store a snapshot of the current buffer, while still allowing edits (the snapshot is easy with immutable ropes), then append the rest of the file to both the snapshot and the buffer under edit, deferring the save until the load is complete. The file contents wouldn’t even be duplicated in RAM, as the rope structure is reference-counted trees, so the references would be shared.</p><p>A considerably tricker interaction would be dynamic changes to the line width. Here, you want to minimize the amount of vertical bouncing as the segment above the cursor is rewrapped and the number of lines changes. A good heuristic would be to preserve the scrolled position of the cursor relative to the top of the window. Another tricky aspect is ordering the sequence async rewraps - you’d want to do what’s on the screen first, for immediate update, then the segment from the start of the screen back to the nearest hard break before it, then maybe work backward to the beginning of the buffer, then from the bottom of the visible region to the end of the buffer. In the meantime, if the change to the width is large, the scrollbar might do “interesting” things - perhaps an even more high tech approach would be to switch back and forth between the “before visible” and “after visible” segments, to keep the effect on the scroll bar minimal.</p><p>Even with all this trickiness, it’s probably worth doing, as the result would be immediate update of the display to a “pretty good” state after almost any change. It’s also likely that I’ll have to plan for asynchronous updates in any case, to tolerate slowness in plugins such as syntax highlighting. I&#x27;ll talk about that more later, as the general case certainly has some interesting aspects compared to just async wrapping.</p><p>I’m not planning on implementing any of this right now, as I don’t feel it’s blocking my goal of delivering a high quality editing experience, and I think the (relatively very simple) code I’m writing now can be adapted when the time comes.</p><p>Next up, probably: spans and interval trees.</p></div></div></div></div></div></main></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---cache-gatsby-mdx-mdx-wrappers-dir-6-a-6-d-7612520-aff-73-cb-56-c-0-b-39-c-2-af-0-be-scope-hash-3010-b-3-badc-54-a-9-dfa-4-a-4-c-80-e-419-a-41-b-2-js","jsonName":"documentation-rope-science-06-db4","path":"/documentation/rope-science-06/"};window.dataPath="90/path---documentation-rope-science-06-db-4-38f-laIBiYhcvQEwZGNkokc75vx8uc";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-46f25a4e0bb303c5d58f.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-5bf3dc2c26ecbd63fbd0.js"],"component---src-templates-blog-list-js":["/component---src-templates-blog-list-js-68e29daae0f560473896.js"],"component---cache-gatsby-mdx-mdx-wrappers-dir-d-95-ab-767-d-696-bb-926-c-5-d-1-d-8-ce-389204-d-scope-hash-3010-b-3-badc-54-a-9-dfa-4-a-4-c-80-e-419-a-41-b-2-js":["/component---cache-gatsby-mdx-mdx-wrappers-dir-d-95-ab-767-d-696-bb-926-c-5-d-1-d-8-ce-389204-d-scope-hash-3010-b-3-badc-54-a-9-dfa-4-a-4-c-80-e-419-a-41-b-2-js-3cce64ab6ad8a00f8053.js"],"component---cache-gatsby-mdx-mdx-wrappers-dir-6-a-6-d-7612520-aff-73-cb-56-c-0-b-39-c-2-af-0-be-scope-hash-3010-b-3-badc-54-a-9-dfa-4-a-4-c-80-e-419-a-41-b-2-js":["/component---cache-gatsby-mdx-mdx-wrappers-dir-6-a-6-d-7612520-aff-73-cb-56-c-0-b-39-c-2-af-0-be-scope-hash-3010-b-3-badc-54-a-9-dfa-4-a-4-c-80-e-419-a-41-b-2-js-96b730ebcfd9805849e8.js"],"component---cache-gatsby-mdx-mdx-wrappers-dir-248-e-51405-d-8-ad-0-e-8-ff-1-a-314-a-5-b-224-cc-0-scope-hash-3010-b-3-badc-54-a-9-dfa-4-a-4-c-80-e-419-a-41-b-2-js":["/component---cache-gatsby-mdx-mdx-wrappers-dir-248-e-51405-d-8-ad-0-e-8-ff-1-a-314-a-5-b-224-cc-0-scope-hash-3010-b-3-badc-54-a-9-dfa-4-a-4-c-80-e-419-a-41-b-2-js-b8d3395483f2c4f148de.js"],"component---src-pages-404-js":["/component---src-pages-404-js-db6cd2ae89009ad1afcd.js"],"component---src-pages-building-docs-js":["/component---src-pages-building-docs-js-d39a25107e95f1a6f7cc.js"],"component---src-pages-contribute-js":["/component---src-pages-contribute-js-c18274c924e984ba4a11.js"],"component---src-pages-index-js":["/component---src-pages-index-js-ed28e9cd9567f298d21d.js"]};/*]]>*/</script><script src="/xi-editor-gatsby/webpack-runtime-e180f5e508da91797d79.js" async=""></script><script src="/xi-editor-gatsby/0-3058d9943b60ad518acf.js" async=""></script><script src="/xi-editor-gatsby/app-46f25a4e0bb303c5d58f.js" async=""></script><script src="/xi-editor-gatsby/component---cache-gatsby-mdx-mdx-wrappers-dir-6-a-6-d-7612520-aff-73-cb-56-c-0-b-39-c-2-af-0-be-scope-hash-3010-b-3-badc-54-a-9-dfa-4-a-4-c-80-e-419-a-41-b-2-js-96b730ebcfd9805849e8.js" async=""></script><script src="/xi-editor-gatsby/1-6e57b76f82a78bcb777f.js" async=""></script></body></html>