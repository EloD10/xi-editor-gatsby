{"data":{"markdownRemark":{"id":"159ebaf9-aed2-5ad5-b403-f0a2c391cbef","html":"<p>These notes are provisional, as the protocol between front-end and\nback-end (aka \"core\") is expected to evolve. Even so, it might be\ninteresting to experiment with new front-ends other than the official\nCocoa one. This document captures the protocol as it exists (and\nshould be updated as it changes).</p>\n<p>The front-end starts the core process and communicates to it through\nstdin and stdout. The outer layer is based heavily on <a href=\"http://www.jsonrpc.org/specification\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JSON-RPC\n2</a>, communicating over stdin and\nstdout, with messages encoded in UTF-8 and terminated in newlines.\nHowever, there are two differences. Most importantly, the protocol is\npeer-to-peer rather than defining strict server and client roles; both\npeers can send RPC's to the other. To reflect that it is not exactly\nJSON-RPC 2, the \"jsonrpc\" parameter is missing.</p>\n<p>A mixture of synchronous and asynchronous RPC's is used. Most editing\ncommands are sent as asynchronous RPC's, with the expectation that\nthe core will send an (also asynchronous) <code class=\"language-text\">update</code> RPC with the\nupdated state.</p>\n<p>When the front-end quits, it closes the stdin pipe, and the core\nis expected to quit silently.</p>\n<p>The protocol is currently not versioned, as there is only one\nofficial front-end, and it is distributed along with the back-end;\nboth should change in lock step. That may well change if and when\nthere are other front-ends developed independently, in which case a\nsimple version negotiation at startup will support a small window of\nversions.</p>\n<h3 id=\"first-steps\"><a href=\"#first-steps\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>First steps</h3>\n<p>When a frontend is initialized, the first thing it does is launch and connect to\nthe core. Currently, the core is always run as a process, although we expect at\nsome point it could be run in the client process as a library.</p>\n<p>After establishing a connection with the core, the client sends the\n<a href=\"#client_started\"><code class=\"language-text\">client_started</code></a> RPC. Core will respond by notifying the\nclient of some initial state, such as a list of available themes. The client\nthen normally sends a <a href=\"#new_view\"><code class=\"language-text\">new_view</code></a> request; when it receives\na response it can begin sending editing operations against that view.</p>\n<h3 id=\"additional-resources\"><a href=\"#additional-resources\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Additional Resources</h3>\n<p>This document is not always perfectly up to date. For a comprehensive list of\nsupported commands, the canonical resource is the source, specifically <a href=\"https://github.com/xi-editor/xi-editor/blob/master/rust/core-lib/src/rpc.rs\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">rust/core-lib/src/rpc.rs</a>.</p>\n<ul>\n<li>The protocol is described in\n<a href=\"/static/frontend-protocol-34d52ab83cddca368a1846b8f7bc58dd.md\">docs/frontend-protocol.md</a>.</li>\n<li>The config system is explained in more detail in <a href=\"/static/config-b20aa19da4ea6e09bb6dc4c0ac540782.md\">docs/config.md</a>.</li>\n</ul>","excerpt":"These notes are provisional, as the protocol between front-end and\nback-end (aka \"core\") is expected to evolve. Even so, it might be\ninteresting to experiment with new front-ends other than the official\nCocoa one. This document captures the protocol as it exists (and\nshould be updated as it changesâ€¦","frontmatter":{"title":"Notes on writing front-ends"}},"allMarkdownRemark":{"edges":[{"node":{"id":"159ebaf9-aed2-5ad5-b403-f0a2c391cbef","fields":{"slug":"/frontend-notes/"},"frontmatter":{"title":"Notes on writing front-ends"}}},{"node":{"id":"db31e77f-3fda-57fc-9830-61c9f7c222dd","fields":{"slug":"/frontend-protocol/"},"frontmatter":{"title":"The Frontend Protocol"}}},{"node":{"id":"e81dd02d-d53d-5928-978d-37b7a16cdb61","fields":{"slug":"/plugin/"},"frontmatter":{"title":"Plugin architecture"}}},{"node":{"id":"056635a4-9cff-573b-9253-1c2afd68ff96","fields":{"slug":"/config/"},"frontmatter":{"title":"Working with the config system"}}},{"node":{"id":"ef83d327-af33-537c-b865-304c9cbd7567","fields":{"slug":"/crdt/"},"frontmatter":{"title":"CRDT - An approach to async plugins and undo"}}},{"node":{"id":"e7b10047-5613-53ea-bdeb-3989cfe8ac10","fields":{"slug":"/crdt-details/"},"frontmatter":{"title":"CRDT - The Xi Text Engine"}}},{"node":{"id":"8493f667-6117-50a0-bc92-21f304190a9f","fields":{"slug":"/fuchsia-ledger-crdts/"},"frontmatter":{"title":"CRDT - Using the Ledger for CRDTs"}}},{"node":{"id":"637adc80-f545-583f-b103-0e6256f0efe1","fields":{"slug":"/rope-science-00/"},"frontmatter":{"title":"Rope science - Introduction"}}},{"node":{"id":"d6abbbb0-ce0b-5810-8ab1-40db5f8fbb4d","fields":{"slug":"/rope-science-01/"},"frontmatter":{"title":"Rope science, part 1 - MapReduce for text"}}},{"node":{"id":"0b56a298-7fea-52be-b0c1-1924e8de94df","fields":{"slug":"/rope-science-02/"},"frontmatter":{"title":"Rope science, part 2 - metrics"}}},{"node":{"id":"f3d25a72-d849-52f7-8fb4-6d586db9b401","fields":{"slug":"/rope-science-03/"},"frontmatter":{"title":"Rope science, part 3 - Grapheme cluster boundaries"}}},{"node":{"id":"ed9dc1bf-9c35-58a0-b8ed-e702bdbc974f","fields":{"slug":"/rope-science-04/"},"frontmatter":{"title":"Rope science, part 4 - parenthesis matching"}}},{"node":{"id":"e3b3971e-a314-5c04-adc0-30c2e2f21345","fields":{"slug":"/rope-science-05/"},"frontmatter":{"title":"Rope science, part 5 - incremental word wrapping"}}},{"node":{"id":"271d1a9b-90e4-5315-b138-2a02a017e117","fields":{"slug":"/rope-science-06/"},"frontmatter":{"title":"Rope science, part 6 - parallel and asynchronous word wrapping"}}},{"node":{"id":"ef5e3b38-01da-5a9c-ad36-fce16dacff86","fields":{"slug":"/rope-science-08/"},"frontmatter":{"title":"Rope science, part 8 - CRDTs for concurrent editing"}}},{"node":{"id":"0c5f285f-2a9b-589f-8eff-a79435e54257","fields":{"slug":"/rope-science-09/"},"frontmatter":{"title":"Rope science, part 9 - CRDT Approach to Async Plugins and Undo"}}},{"node":{"id":"ef95af30-321f-5d87-a5e3-720e4eff00f9","fields":{"slug":"/rope-science-10/"},"frontmatter":{"title":"Rope science, part 10 - designing for a conflict-free world"}}},{"node":{"id":"4dd8698d-d45f-543c-9905-eba9659b68b0","fields":{"slug":"/rope-science-11/"},"frontmatter":{"title":"Rope science, part 11 - practical syntax highlighting"}}}]}},"pageContext":{"id":"159ebaf9-aed2-5ad5-b403-f0a2c391cbef"}}